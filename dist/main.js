!function(e){var t={};function n(o){if(t[o])return t[o].exports;var s=t[o]={i:o,l:!1,exports:{}};return e[o].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(o,s,function(t){return e[t]}.bind(null,s));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);const o=(e,t)=>{const n=[];return{title:e,dateDue:t,toDos:n,getTitle:()=>e,setTodos:e=>{n.push(e)},deleteTodo:e=>{n.splice(e,1)}}},s=o("Sample","9/15/2020");console.log(s);const a=(()=>{const e=[];return{projects:e,setProjects:t=>{e.push(t)},deleteProject:t=>{e.splice(t,1),console.log(e)},addProjToDatabase:(e,t)=>{const n=t.toString(),o=firebase.auth().currentUser;db.collection(o.email).doc(n).set({title:e.title,dateDue:e.dateDue})},getProjFromDatabase:()=>{const t=firebase.auth().currentUser;db.collection(t.email).get().then((function(t){t.forEach((function(t){const n=[];n.push(t.data()),n.forEach(t=>{const n=o(t.title,t.dateDue);e.push(n),i.renderProjects(e)})}))}))},deleteProjFromDatabase:e=>{const t=firebase.auth().currentUser,n=e.toString();db.collection(t.email).doc(n).delete().then((function(){console.log("Document successfully deleted!")})).catch((function(e){console.error("Error removing document: ",e)}))}}})(),i=(()=>{const e=document.querySelector(".content"),t=t=>{t.forEach((function(t,o,s){if(0===o&&(t.projectID=0),o===s.length-1){const s=document.createElement("div");s.className="slide project-div",s.dataset.id=o,t.projectID=o;const i=document.createElement("div");i.className="title-div",i.innerHTML=`<h4>${t.getTitle()}</h4>`;const l=document.createElement("div");l.className="date-div",l.innerHTML=`<h4>${t.dateDue}</h4>`;const r=document.createElement("div");r.dataset.number=o,r.style.display="none",s.appendChild(i),s.appendChild(l),e.appendChild(s),a.addProjToDatabase(t,o);const c=document.createElement("button");c.className="img-button delete-project-button",c.addEventListener("click",()=>{event.target.parentNode.remove(),a.deleteProject(o),a.deleteProjFromDatabase(o)}),s.appendChild(c);const d=document.createElement("button");d.id="add-task",d.className="img-button add-task-button",d.addEventListener("click",()=>{n(t,s)}),s.appendChild(d);const u=document.createElement("button");u.className="img-button show-tasks",u.addEventListener("click",()=>{"show-tasks"===u.className&&!1===r.hasChildNodes()?(console.log(r.hasChildNodes()),u.className="img-button show-tasks"):u.className="img-button hide-tasks",0!==t.toDos.length?"none"===r.style.display?(s.className="project-div-expanded",r.style.display="grid","project-div"===s.className&&(r.style.display="none")):"grid"===r.style.display&&(s.className="project-div",r.style.display="none"):alert("No tasks in project")}),s.appendChild(u),s.appendChild(r)}}))},n=(t,n)=>{const o=document.createElement("div");o.id="overlay",e.appendChild(o);const a=document.createElement("div");a.className="new-task-form",a.id="task-form-in-div";const l=s("newTaskNameInput","form-group input-group form-control","Task Name");l.id="task-name-input",a.appendChild(l);const r=s("newTaskDescriptionInput","form-group input-group form-control","Describe this task");r.id="describe",a.appendChild(r);["Low","Medium","High"].forEach(e=>{const t=document.createElement("div");t.className=e,t.innerHTML=`<input type = "radio" name='priority' class = 'radio'\n            \n            id = ${e} />\n            <label for = ${e}>${e} priority</label>`,a.appendChild(t)});const c=document.createElement("div");c.className="task-button-div";const d=document.createElement("button");d.innerHTML="Close",d.className="main-button collapse-task-form",c.appendChild(d),d.addEventListener("click",()=>{o.style.display="none"});const u=document.createElement("button");u.innerHTML="Add task to "+t.getTitle(),u.className="main-button new-task-button",c.appendChild(u),a.appendChild(c),o.appendChild(a),u.addEventListener("click",()=>{event.preventDefault();const e=document.querySelector('input[name="priority"]:checked').id;if(e||alert("Please Select Priority"),r.value&&l.value){let d=(s=l.value,c=r.value,{title:s,description:c,priority:e,completedTask:!1});t.setTodos(d),i(n,t),a.style.display="none",o.style.display="none"}else alert("Please Fill In Both Fields!");var s,c})},s=(e,t,n)=>((e=document.createElement("input")).className=t,e.type="text",e.placeholder=n,e.value="",e),i=(e,t)=>{console.log(e);const n=t.projectID;console.log(n);let o=t.toDos,s=document.querySelector(`[data-number='${n}']`);s.className="task-list-div",o.forEach((function(t,n,o){if(n===o.length-1){const n=document.createElement("div");n.className="list-items",n.innerHTML=`<p class = 'task-list-item'>${t.title}</p> \n                <p class='description-list-item'>${t.description}</p> \n                <div class='priority-list-item'></div>`,s.appendChild(n);const o=document.querySelector(".priority-list-item");console.log(o),"High"===t.priority?o.className="dot high-priority":"Medium"===t.priority?o.className="dot medium-priority":"Low"===t.priority&&(o.className="dot low-priority");const a=document.createElement("button");a.className="img-button completed-button",n.appendChild(a),"project-div-expanded"===e.className?s.style.display="grid":s.style.display="none",a.addEventListener("click",()=>{!0===t.completedTask?t.completedTask=!1:t.completedTask=!0,"img-button completed-button"===a.className?a.className="img-button completed-button-complete":a.className="img-button completed-button"})}}))};return{renderProjects:t,renderNewProjectButton:()=>{const e=document.querySelector(".sidebar"),n=document.createElement("div");n.innerHTML='<h3 class ="header">Add a project</h3>',n.className="col-sm-4",n.id="new-project-form-div",e.appendChild(n);const i=s("newProjectInput","form-group input-group form-control","Project Name");n.appendChild(i),n.appendChild((()=>{const e=document.createElement("div");return e.innerHTML="\n<form class ='form-group'>\n    <div class='input-group date' id='datetimepicker1'>\n            <input type='text' placeholder='Due Date' class=\"cal-val form-control\" data-date='due' />\n                <span class=\"input-group-addon\">\n                    <span class=\"glyphicon glyphicon-calendar\"></span>\n                </span>\n            </div> \n            <script type=\"text/javascript\">\n            \n            <\/script>",e})()),$((function(){$(".date").datetimepicker()}));const l=document.querySelector(".cal-val"),r=document.createElement("button");r.id="new-project-button",r.className="main-button",r.innerHTML="Create New Project",n.appendChild(r),r.addEventListener("click",()=>{if(i.value&&l.value){let e=l.value;const n=o(i.value,e.substr(0,e.indexOf(" ")));a.setProjects(n),t(a.projects),l.value="",i.value=""}else alert("Please fill in both fields")})}}})(),l=(()=>{const e=document.querySelector(".sidebar");return{createUser:(e,t)=>{firebase.auth().createUserWithEmailAndPassword(e,t).then(e=>{console.log("user created")}).catch(e=>{e.code,e.message;alert(e)})},logInUser:(e,t)=>{firebase.auth().signInWithEmailAndPassword(e,t).then(e=>{console.log("sign in success"),i.renderNewProjectButton(),console.log(e)}).catch(e=>{e.code,e.message;console.log(e),r.initialLoginDiv()})},onLoginUser:()=>{firebase.auth().onAuthStateChanged(n=>{if(n){document.querySelector(".login-nav").innerHTML=`<div class ='logged-in'><p>${n.email}<p><br><button id ='logout' class ='main-button'>Log Out</button></div>`;var o=n.uid;console.log(o),e.addEventListener("click",()=>{"logout"===event.target.id&&t()})}else console.log("could not log in")});const t=()=>{firebase.auth().signOut().then(()=>{console.log("sign out success")}).catch(e=>{console.log(e)})}}}})(),r=(()=>{const e=document.querySelector(".sidebar"),t=()=>{const t=document.createElement("div");t.id="login-div",t.innerHTML="<h3 class='header'>To-Do List</h3><button class='main-button' id ='log-in'>Login</button><br><button class='main-button' id ='sign-up'>Sign Up</button><button class='main-button' id ='guest-user'>Continue As Guest</button>",e.appendChild(t),e.addEventListener("click",()=>{if("log-in"===event.target.id&&n(t,"Login","submit-login"),"sign-up"===event.target.id&&n(t,"Sign-Up","submit-signup"),"guest-user"===event.target.id){console.log("clicked"),t.style.display="none";const e=a.projects;console.log(e),i.renderProjects(e),i.renderNewProjectButton()}})},n=(n,o,s)=>{n.innerHTML=`<h3 class='header'>To-Do List</h3><form class ='col-sm-25'>\n  <label for="email">Email:</label><br>\n  <input class= 'form-control' type="text" id="email" placeholder= 'E-mail' name="email" value=""><br>\n  <label for="password">Password:</label><br>\n  <input class ='form-control' type="password" id="pword"  placeholder ='Password' name="pword" value=""><br><br>\n  <input class='main-button' type="submit" value=${o} id =${s}>\n</form> `,e.addEventListener("click",()=>{"submit-login"===event.target.id&&(event.preventDefault(),n.style.display="none",l.logInUser(n.childNodes[1][0].value,n.childNodes[1][1].value),l.onLoginUser(),a.getProjFromDatabase(),i.renderProjects(projectList)),"submit-signup"===event.target.id&&(event.preventDefault(),n.style.display="none",l.createUser(n.childNodes[1][0].value,n.childNodes[1][1].value),alert("user created"),t())})};return{initialLoginDiv:t,removeInterface:()=>{const e=document.querySelector(".content");for(let t=e.childNodes.length-1;t>=0;t--)e.removeChild(node.childNodes[t])}}})();r.initialLoginDiv()}]);